<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ø¬Ø¯ÙˆÙ„ ØµÙ„Ø§Ø© Ø§Ù„ØªØ±Ø§ÙˆÙŠØ­ - Ø¬Ø§Ù…Ø¹ Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ø±Ø¨ÙŠØ¹ Ø¨Ù† Ø­Ø¨ÙŠØ¨</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap');

:root{
  --bg:#f0f4f2;
  --card:#ffffff;
  --accent:#34624f;
  --gold:#d4af37;
  --friday:#cfe3d6;
  --header-col:#49876d;
  --first-col:#49876d;
}

html, body{
  margin:0;
  font-family:'Amiri', serif;
  background:var(--bg) url('https://www.toptal.com/designers/subtlepatterns/uploads/moroccan-flower.png') repeat;
  background-size:300px;
  color:#000;
}

.container{
  max-width:1000px;
  margin:20px auto;
  padding:15px;
}

.card{
  background:var(--card);
  border-radius:14px;
  padding:22px;
  border:4px solid var(--gold);
  box-shadow:0 8px 24px rgba(0,0,0,0.08);
  position:relative;
}

.card:before{
  content:"";
  position:absolute;
  top:-10px;left:-10px;right:-10px;bottom:-10px;
  border:3px solid var(--gold);
  border-radius:20px;
  pointer-events:none;
}

h1::before{
  content:"";
  display:block;
  width:140px;
  height:160px;
  margin:0 auto 10px auto;
  background:url('./img.png') center/contain no-repeat;
}

h1,h2{
  font-size:26px;
  text-align:center;
  margin-bottom:15px;
  color:var(--accent);
  font-weight:700;
}

.table-wrapper{
  width:100%;
  overflow-x:auto;
  -webkit-overflow-scrolling:touch;
  margin-top:10px;
}

table{
  width:100%;
  min-width:650px;
  border-collapse:collapse;
  font-size:18px;
  background:#fff;
  border-radius:12px;
  overflow:hidden;
  border:2px solid #a9a9a9;
}

thead th{
  background:#49876d; /* Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø®Ø¶Ø± */
  color:#fff;
  text-align:center;
  padding:14px;
  font-size:18px;
  border:1px solid #a9a9a9;
}

tbody td{
  padding:14px;
  text-align:center;
  border:1px solid #a9a9a9;
  font-size:17px;
}

tbody tr:nth-child(odd){ background: rgba(245,245,245,0.7); }
tbody tr:nth-child(even){ background:#ffffff; }
tbody tr:hover{ background:#e0f0e8; }

tbody td:first-child{
  background:var(--first-col);
  color:#fff;
  font-weight:700;
  width:120px;
}

tbody tr.friday{
  background-color:var(--friday) !important;
}

@media (max-width:600px){
  table{
    font-size:15px;
    min-width:600px;
  }
  thead th, tbody td{
    padding:10px;
    font-size:15px;
  }
  h1,h2{
    font-size:22px;
  }
  tbody td:first-child{
    width:100px;
  }
}

.card-header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  flex-wrap:wrap;
  padding:12px 10px;
}

#saveBtn, #printBtn {
  padding:10px 16px;
  border-radius:12px;
  cursor:pointer;
  font-weight:bold;
  color:#fff;
  font-size:15px;
  border:none;
  transition:0.2s;
}

#saveBtn { background: var(--gold); }
#saveBtn:hover { background: #c49b2c; }

#printBtn { background: var(--accent); margin-left:10px; }
#printBtn:hover { background:#397155; }

#saveMessage{
  color:green;
  font-weight:bold;
  display:none;
  margin-right:8px;
}

.contact-box{
  background:var(--card);
  padding:8px 15px;
  border:2px solid var(--gold);
  border-radius:12px;
  text-align:center;
  color:var(--accent);
  font-size:15px;
  line-height:1.6;
  box-shadow:0 2px 6px rgba(0,0,0,0.08);
}

@media print {
  body * { visibility: hidden; }
  #mainTable, #mainTable * { visibility: visible; }
  #mainTable { position:absolute; top:0; left:0; width:100%; }
}
</style>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.16.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.16.0/firebase-database-compat.js"></script>

</head>
<body>
<div class="container">
  <div class="card">

    <div class="card-header">
      <div style="display:flex;align-items:center;">
        <button id="saveBtn">ğŸ’¾ Ø­ÙØ¸</button>
        <span id="saveMessage">ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­ âœ…</span>
        <button id="printBtn">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>
      </div>

      <div class="contact-box">
        <strong> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ø§Ù…Ø¹:</strong><br/>
        ÙÙŠØµÙ„ Ø§Ù„Ù…Ø¨Ø³Ù„ÙŠ: 98036047<br/>
        Ø¯Ø§ÙˆÙˆØ¯ Ø§Ù„Ù…Ø¨Ø³Ù„ÙŠ: 95522897
      </div>
    </div>

    <h1>Ø¬Ø¯ÙˆÙ„ ØµÙ„Ø§Ø© Ø§Ù„ØªØ±Ø§ÙˆÙŠØ­ - Ø¬Ø§Ù…Ø¹ Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ø±Ø¨ÙŠØ¹ Ø¨Ù† Ø­Ø¨ÙŠØ¨</h1>
    <h2>Ø§Ù„Ø³ÙŠØ¨ - ÙˆØ§Ø¯ÙŠ Ø§Ù„Ù„ÙˆØ§Ù…ÙŠ</h2>

    <div class="table-wrapper">
      <table id="mainTable">
        <thead>
          <tr>
            <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
            <th>Ø§Ø³Ù… Ø§Ù„Ø¥Ù…Ø§Ù…</th>
            <th>Ø±Ù‚Ù… Ø§Ù„ØªÙˆØ§ØµÙ„</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

  </div>
</div>

<script>
const TOTAL_DAYS=30;
const START_DATE=new Date(2026,1,18);
const weekdays=["Ø§Ù„Ø£Ø­Ø¯","Ø§Ù„Ø§Ø«Ù†ÙŠÙ†","Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡","Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø§Ù„Ø®Ù…ÙŠØ³","Ø§Ù„Ø¬Ù…Ø¹Ø©","Ø§Ù„Ø³Ø¨Øª"];
const tbody=document.querySelector("#mainTable tbody");

const firebaseConfig = {
  apiKey: "AIzaSyC54cdPVh730M-AC8MFpoU8YuXckzoQcvY",
  authDomain: "taraweehprayer1447.firebaseapp.com",
  databaseURL: "https://taraweehprayer1447-default-rtdb.firebaseio.com",
  projectId: "taraweehprayer1447",
  storageBucket: "taraweehprayer1447.firebasestorage.app",
  messagingSenderId: "1007291606404",
  appId: "1:1007291606404:web:4acc20e78f9485ee8669d1",
  measurementId: "G-WP7PW0LFG6"
};
firebase.initializeApp(firebaseConfig);
const db=firebase.database();

// Ø¯Ø§Ù„Ø© Ù„Ø¶Ø¨Ø· Ø§Ù„Ø§ØªØ¬Ø§Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§
function setDirection(cell){
    const arabicRegex=/[\u0600-\u06FF]/;
    const content=cell.textContent.trim();
    if(arabicRegex.test(content)){ cell.style.direction="rtl"; cell.style.textAlign="right"; }
    else { cell.style.direction="ltr"; cell.style.textAlign="left"; }
}

// Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¬Ø¯ÙˆÙ„
for(let i=1;i<=TOTAL_DAYS;i++){
    const tr=document.createElement("tr");
    const date=new Date(START_DATE);
    date.setDate(START_DATE.getDate()+(i-1));
    const weekdayName=weekdays[date.getDay()];
    if(weekdayName==="Ø§Ù„Ø¬Ù…Ø¹Ø©") tr.classList.add("friday");

    const tdDate=document.createElement("td");
    tdDate.contentEditable=true;
    tdDate.textContent=`${date.getDate()}/${date.getMonth()+1}/${date.getFullYear()} - ${weekdayName} - Ø±Ù…Ø¶Ø§Ù† ${i}`;
    setDirection(tdDate);
    tr.appendChild(tdDate);

    const tdTime=document.createElement("td");
    const selectTime=document.createElement("select");
    const options=weekdayName==="Ø§Ù„Ø¬Ù…Ø¹Ø©"
        ? ["Ø¨Ø¹Ø¯ ØµÙ„Ø§Ø© Ø§Ù„Ø¬Ù…Ø¹Ø©","Ø¨Ø¹Ø¯ ØµÙ„Ø§Ø© Ø§Ù„Ø¹ØµØ±","Ø¨Ø¹Ø¯ ØµÙ„Ø§Ø© Ø§Ù„Ù…ØºØ±Ø¨","Ø¨Ø¹Ø¯ ØµÙ„Ø§Ø© Ø§Ù„Ø¹Ø´Ø§Ø¡"]
        : ["Ø¨Ø¹Ø¯ ØµÙ„Ø§Ø© Ø§Ù„Ø¸Ù‡Ø±","Ø¨Ø¹Ø¯ ØµÙ„Ø§Ø© Ø§Ù„Ø¹ØµØ±","Ø¨Ø¹Ø¯ ØµÙ„Ø§Ø© Ø§Ù„Ù…ØºØ±Ø¨","Ø¨Ø¹Ø¯ ØµÙ„Ø§Ø© Ø§Ù„Ø¹Ø´Ø§Ø¡"];
    options.forEach(opt=>{const option=document.createElement("option"); option.value=opt; option.textContent=opt; selectTime.appendChild(option);});
    tdTime.appendChild(selectTime);
    tr.appendChild(tdTime);

    const tdName=document.createElement("td");
    tdName.contentEditable=true;
    setDirection(tdName);
    tr.appendChild(tdName);

    const tdPhone=document.createElement("td");
    tdPhone.contentEditable=true;
    setDirection(tdPhone);
    tr.appendChild(tdPhone);

    tbody.appendChild(tr);
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø§ØªØ¬Ø§Ù‡ ÙˆØ­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
tbody.addEventListener("input",(e)=>{
    const cell=e.target.closest("td");
    if(cell) setDirection(cell);

    const rows=Array.from(tbody.querySelectorAll("tr")).map(tr=>{
        const tds=tr.querySelectorAll("td");
        return {
            date: tds[0].textContent.trim(),
            time: tds[1].querySelector("select").value,
            lecturer: tds[2].textContent.trim(),
            contact: tds[3].textContent.trim()
        };
    });
    db.ref("ramadan_lectures").set(rows);
    document.getElementById("saveMessage").style.display="inline";
    setTimeout(()=>{document.getElementById("saveMessage").style.display="none";},1500);
});

// Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Firebase
db.ref("ramadan_lectures").on("value",snapshot=>{
    const data=snapshot.val();
    if(!data) return;
    tbody.querySelectorAll("tr").forEach((tr,i)=>{
        const tds=tr.querySelectorAll("td");
        if(data[i]){
            tds[0].textContent=data[i].date;
            tds[1].querySelector("select").value=data[i].time;
            tds[2].textContent=data[i].lecturer;
            tds[3].textContent=data[i].contact;
            tds.forEach(td=>setDirection(td));
        }
    });
});
</script>
</body>
</html>


